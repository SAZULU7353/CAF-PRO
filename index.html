<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Community Awareness Forum (CAF)</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;margin:0;background:#f4f6f8}
header{background:#0b5394;color:#fff;padding:15px;text-align:center}
section{background:#fff;margin:15px;padding:15px;border-radius:8px}
h2{color:#0b5394}
input,button,textarea{width:100%;padding:8px;margin:5px 0}
button{background:#0b5394;color:#fff;border:none;border-radius:5px;cursor:pointer}
button:hover{opacity:.9}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:8px;text-align:left}
.id-card{width:300px;border:2px solid #0b5394;border-radius:10px;padding:10px;text-align:center;margin:10px auto}
.id-card h3{margin:5px 0;color:#0b5394}
.hidden{display:none}

@media print{
  body *{visibility:hidden}
  .id-card,.id-card *{visibility:visible}
  .id-card{position:absolute;left:0;right:0;top:20px}
}
</style>
</head>

<body>

<header>
<h1>COMMUNITY AWARENESS FORUM (CAF)</h1>
</header>

<!-- LOGIN -->
<section id="loginSection">
<h2>Login</h2>
<input id="loginEmail" placeholder="Username">
<input id="loginPassword" type="password" placeholder="Password">
<button onclick="login()">Login</button>
</section>

<!-- LOGOUT -->
<section id="logoutSection" class="hidden">
<button onclick="logout()">Logout</button>
</section>

<!-- REGISTER -->
<section id="registerSection">
<h2>Member Registration</h2>
<input id="regName" placeholder="Full Name">
<input id="regEmail" placeholder="Username">
<input id="regPassword" type="password" placeholder="Password">
<button onclick="register()">Register</button>
</section>

<!-- PENDING APPROVAL -->
<section id="pendingSection" class="hidden">
<h2>Pending Members (Admin)</h2>
<table id="pendingTable"></table>
</section>

<!-- MEMBERS -->
<section id="membersSection" class="hidden">
<h2>Approved Members (Admin)</h2>
<table id="memberTable"></table>
</section>

<!-- ID CARD -->
<section id="idSection" class="hidden">
<h2>My ID Card</h2>
<div class="id-card" id="idCard">
<h3>CAF MEMBER ID</h3>
<p><strong>Name:</strong> <span id="idName"></span></p>
<p><strong>Username:</strong> <span id="idEmail"></span></p>
<p><strong>Status:</strong> Active Member</p>
</div>
<button onclick="window.print()">Print ID Card</button>
</section>

<!-- CONTACT -->
<section>
<h2>Contact Us</h2>
<textarea id="contactMessage" placeholder="Your message"></textarea>
<button onclick="submitContact()">Send Message</button>
<p>Email: communityawarenessforum1234@gmail.com</p>
<p>Phone: 08122280304</p>
</section>

<script>
/* ===== ADMIN ===== */
const adminAccount={
  email:"caf1234",
  password:"Caf1234",
  role:"admin"
};

/* ===== DATA ===== */
let members=[];
let pendingMembers=[];
let currentUser=null;
let currentUserType=null;

/* ===== LOGIN ===== */
function login(){
  const e=loginEmail.value.trim();
  const p=loginPassword.value.trim();

  if(!e||!p){alert("Fill all fields");return;}

  if(e===adminAccount.email && p===adminAccount.password){
    currentUser=adminAccount;
    currentUserType="admin";
    afterLogin();
    alert("Admin login successful");
    return;
  }

  const m=members.find(x=>x.email===e && x.password===p);
  if(m){
    currentUser=m;
    currentUserType="member";
    afterLogin();
    showIDCard();
    alert("Member login successful");
    return;
  }

  alert("Invalid credentials");
}

/* ===== LOGOUT ===== */
function logout(){
  currentUser=null;
  currentUserType=null;
  location.reload();
}

/* ===== AFTER LOGIN ===== */
function afterLogin(){
  loginSection.classList.add("hidden");
  logoutSection.classList.remove("hidden");

  if(currentUserType==="admin"){
    pendingSection.classList.remove("hidden");
    membersSection.classList.remove("hidden");
    updatePendingTable();
    updateMemberTable();
  }
}

/* ===== REGISTER ===== */
function register(){
  if(!regName.value||!regEmail.value||!regPassword.value){
    alert("All fields required");return;
  }
  pendingMembers.push({
    fullname:regName.value,
    email:regEmail.value,
    password:regPassword.value
  });
  alert("Registration submitted. Await approval.");
  regName.value=regEmail.value=regPassword.value="";
}

/* ===== APPROVE ===== */
function updatePendingTable(){
  pendingTable.innerHTML="<tr><th>Name</th><th>Username</th><th>Action</th></tr>";
  pendingMembers.forEach((m,i)=>{
    let r=pendingTable.insertRow();
    r.insertCell(0).innerText=m.fullname;
    r.insertCell(1).innerText=m.email;
    let b=document.createElement("button");
    b.innerText="Approve";
    b.onclick=()=>approveMember(i);
    r.insertCell(2).appendChild(b);
  });
}

function approveMember(i){
  members.push(pendingMembers[i]);
  pendingMembers.splice(i,1);
  updatePendingTable();
  updateMemberTable();
}

/* ===== MEMBERS ===== */
function updateMemberTable(){
  memberTable.innerHTML="<tr><th>Name</th><th>Username</th><th>Remove</th></tr>";
  members.forEach((m,i)=>{
    let r=memberTable.insertRow();
    r.insertCell(0).innerText=m.fullname;
    r.insertCell(1).innerText=m.email;
    let b=document.createElement("button");
    b.innerText="Remove";
    b.onclick=()=>{members.splice(i,1);updateMemberTable();}
    r.insertCell(2).appendChild(b);
  });
}

/* ===== ID CARD ===== */
function showIDCard(){
  idSection.classList.remove("hidden");
  idName.innerText=currentUser.fullname;
  idEmail.innerText=currentUser.email;
}

/* ===== CONTACT ===== */
function submitContact(){
  if(!contactMessage.value.trim()){
    alert("Enter message");return;
  }
  alert("Message sent. Thank you!");
  contactMessage.value="";
}
</script>

</body>
</html>
